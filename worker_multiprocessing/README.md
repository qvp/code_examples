Воркер, основанный на процессах. Построен на multiprocessing, pika, RabbitMQ, Docker

Пример показывает как я решал задачу на проекте, большинство логики опущено для наглядности и соображений NDA.

* Под каждый воркер выделяется отдельный сервер (условия лицензии стороннего ПО)
* Воркер берет только 1 задачу за раз (ограничение стороннего ПО)
* Воркер должен работать на сервере под управлением Windows (ограничение стороннего ПО)
* Необходима возможность быстро менять логику работы в зависимости от изменчивых условий
* Иметь возможность отслеживать количество рабочих воркеров и управлять ими через админ панель
* Задачи выполняются от нескольких минут до нескольких часов

### Принцип работы
Воркер берет задачу в работу и выполняет ее в отдельном процессе. Также все воркеры подписываются на получение команд.
И если команда относится к текущему воркеру или задаче он ее выполняет. Пример команды - отменить выполнение всех задач в рамках сессии (группы).

### Запуск
`docker-compose up`  
Порты 15672 и 5672 должны быть свободны

### Тест
После запуска открыть в браузере http://localhost:15672/  
(Логин admin пароль admin)  

Чтобы создать новую задачу нужно выбрать очередь задач в разделе "Queues" и добавить новую задачу в очередь "wa_task_queue":  
Успешное: `{"id": 123, "session_id": 456, "payload": {}}`  
Вызывающее ошибку: `{"id": 123, "session_id": 456, "payload": {"raise_error": true}}`

![alt](https://github.com/qvp/code_examples/blob/main/worker_multiprocessing/rabbit_gui_queue.png?raw=true)

Чтобы отправить команду воркеру на завершение сессии нужно во вкладке "Exchanges" выбрать "wa_command_exchange" и отправить в него команду:  
`{ "message_type": "session_canceled","session_id": 456}`

![alt](https://github.com/qvp/code_examples/blob/main/worker_multiprocessing/rabbit_gui_cancel.png?raw=true)
